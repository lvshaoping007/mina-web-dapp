let account;const initializeMina=async()=>{const e=document.getElementById("connectButton"),n=document.getElementById("getAccounts"),t=document.getElementById("getAccountsResult");e.onclick=()=>{window.mina?(e.innerText="Onboarding in progress",window.mina.requestAccounts().then((n=>{let t=n.result;console.log("requestAccounts=",t),Array.isArray(t)&&t.length>0?(account=t,document.getElementById("accounts").innerHTML=t,e.innerText="Connected",e.disabled=!0):e.innerText=t.error}))):alert("请先安装auro-extension-wallet")},n.onclick=async()=>{if(window.mina){let e=await window.mina.requestAccounts();account=e.result,Array.isArray(account)&&account.length>0&&(t.innerHTML=account||"Not able to get accounts")}};const o=document.getElementById("sendButton"),c=document.getElementById("sendAmountInput"),s=document.getElementById("receiveAddressInput"),a=document.getElementById("sendResultDisplay");o.onclick=async()=>{let e=account&&account.length>0?account[0]:"",n=await window.mina.signTransfer({amount:c.value,from:e,to:s.value});console.log("signResult--0",n),a.innerHTML=n.error||n.result.hash};const i=document.getElementById("stakingButton"),u=document.getElementById("vaildatorAddressInput"),l=document.getElementById("stakingResultDisplay");i.onclick=async()=>{let e=account&&account.length>0?account[0]:"",n=await window.mina.signStaking({from:e,to:u.value});console.log("signVerifyButton--0",n),l.innerHTML=n.error||n.result.hash};const r=document.getElementById("signMessageButton"),d=document.getElementById("signMessageContent"),g=document.getElementById("signMessageResult"),m=document.getElementById("signVerifyButton"),y=document.getElementById("verifyResult");let w;function B(n){Array.isArray(n)&&(document.getElementById("accounts").innerHTML=n,0===n.length&&(e.innerText="Connect",e.disabled=!1))}r.onclick=async()=>{let e=account&&account.length>0?account[0]:"";w=await window.mina.signMessage({from:e,message:d.value}),console.log("signMessageButton--0",w),g.innerHTML=w.error||w.result.signature},m.onclick=async()=>{let e=await window.mina.verifyMessage({message:w?.result?.signature});console.log("signVerifyButton--0",e),y.innerHTML=e?.error||e.result},setTimeout((()=>{window.mina&&window.mina.onAccountChange("accountsChanged",B)}),200)};window.addEventListener("DOMContentLoaded",initializeMina);